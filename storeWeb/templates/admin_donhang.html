{% extends "admin_base.html" %}
{% block title %}Qu·∫£n l√Ω ƒë∆°n h√†ng{% endblock %}

{% block content %}
<div class="container">
    <h3 class="mb-4">üì¶ Danh s√°ch ƒë∆°n h√†ng</h3>
    <div class="table-wrap">
        <table class="table table-striped align-middle">
            <thead class="table-dark">
            <tr>
                <th>M√£ ƒêH</th>
                <th>Kh√°ch h√†ng</th>
                <th>T·ªïng gi√°</th>
                <th>Thanh to√°n</th>
                <th>Tr·∫°ng th√°i</th>
                <th>Ng√†y t·∫°o</th>
                <th>Chi ti·∫øt</th>
            </tr>
            </thead>
            <tbody>
            {% for dh in orders %}
            <tr>
                <td>#{{ dh.maDonHang }}</td>
                <td>{{ dh.hoTen }}</td>
                <td>{{ "{:,.0f}".format(dh.tongGia|float) }} ƒë</td>
                <td>{{ dh.phuongThucThanhToan }}</td>
                <td>
                        <span class="badge bg-{{ 'secondary' if dh.trangThai=='pending' 
                                                         else 'info' if dh.trangThai=='confirmed'
                                                         else 'warning' if dh.trangThai=='shipped'
                                                         else 'danger' }}">
                            {{ dh.trangThai }}
                        </span>
                </td>
                <td>{{ dh.ngaytao.strftime("%d/%m/%Y %H:%M") }}</td>
                <td>
                    <a href="/admin/donhang/{{ dh.maDonHang }}" class="btn btn-sm btn-primary">
                        <i class="bi bi-eye"></i> Xem
                    </a>
                    <form action="/admin/donhang/delete/{{ dh.maDonHang }}" method="POST"
                          style="display:inline;"
                          onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ƒë∆°n h√†ng n√†y kh√¥ng?');">
                        <button type="submit" class="btn btn-sm btn-danger">
                            <i class="bi bi-trash"></i> X√≥a
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
